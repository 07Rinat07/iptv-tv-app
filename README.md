# myscanerIPTV приложение для ТВ бокса андроид ТВ

Production-oriented MVP IPTV-приложения для Android TV/TV Box (minSdk 24).
Для энтузиастов, желающих быстро найти и смотреть IPTV-каналы с помощью удобного интерфейса и встроенного плеера.

## Текущий статус ===> Приложение в РАЗРАБОТКЕ.
- Приложение запускается без PIN-кода.
- Работают ключевые сценарии:
  - `Сканировать -> Найти -> Сохранить -> Мои плейлисты -> Редактор -> Воспроизвести`.
- Поддержано управление и D-pad/пультом, и мышью.

## Что уже реализовано
- Многомодульная архитектура: Clean Architecture + MVVM + Hilt + Room + WorkManager.
- Сканер публичных M3U/M3U8:
  - GitHub/GitLab/Bitbucket;
  - пресеты поиска (общий, русские, мир, спорт, фильмы);
  - фильтры `repo/path/date/size`;
  - retry/backoff, кэш, логи ошибок и шагов поиска.
- Импорт плейлистов:
  - по URL;
  - вставкой текста;
  - из локального файла;
  - валидация `#EXTM3U/#EXTINF/URL`, дедупликация, health-check потоков.
- Мои плейлисты:
  - хранение источников и каналов;
  - ручное обновление и автообновление через WorkManager.
- Редактор:
  - безопасный Copy-on-Write (оригинал источника не портится);
  - массовые операции: скрыть/показать/удалить/переместить;
  - редактирование полей канала;
  - создание пользовательского плейлиста;
  - экспорт в M3U (в память приложения и через системный выбор пути).
- Плеер:
  - встроенный Media3/ExoPlayer;
  - внешний VLC через Intent;
  - fallback и авто-переключение при ошибках;
  - профили буфера + ручные параметры;
  - поддержка URL с заголовками вида `url|user-agent=...&referer=...`.
- Engine Stream / torrent-TV:
  - подключение к endpoint движка;
  - резолв `magnet/acestream/ace/.torrent` через движок;
  - диагностика статуса движка/сети.
- Глобальное избранное и история просмотров.
- Диагностика и логи:
  - просмотр последних событий в приложении;
  - экспорт логов в файл.

## Ограничения текущего MVP
- Доступность каналов зависит от внешних источников (часть URL может быть “мертвой”).
- Загрузки torrent-задач пока базовые (очередь/статусы/progress-модель без полноценного torrent-клиента).
- Полноценный EPG/телепрограмма и расширенный каталог логотипов пока не финализированы.

## Технический стек
- Kotlin, Coroutines/Flow
- Jetpack Compose (Android TV UI)
- Media3/ExoPlayer
- Retrofit + OkHttp
- Room
- WorkManager
- Hilt

## Требования к окружению
- Android Studio (желательно актуальная версия)
- Android SDK 35
- JDK 17+ (рекомендуется JBR из Android Studio)

## Сборка и тесты (Windows PowerShell)
```powershell
$env:JAVA_HOME="C:\Program Files\Android\Android Studio\jbr"
.\gradlew.bat testDebugUnitTest -x lint
.\gradlew.bat :app:assembleDebug -x lint
```

## Готовый APK для установки на TV Box
- Файл: `build-artifacts/myscanerIPTV-tvbox-debug.apk`
- Актуальный SHA-256:
  - `3A4AAD54D4142A450C86D15716D7A56C272365D68B4A12E876EB314E95CA48AF`

## Установка на Android TV Box через USB
1. Скопируйте `build-artifacts/myscanerIPTV-tvbox-debug.apk` на флешку.
2. Подключите флешку к TV Box.
3. Откройте любой файловый менеджер на TV Box.
4. Запустите APK и подтвердите установку.
5. Если нужно, включите разрешение “Установка из неизвестных источников” для файлового менеджера.

## Быстрый сценарий использования
1. На главной откройте `Сканер`.
2. Выберите пресет (например, `Русские каналы`) и нажмите `Найти и сохранить 10`.
3. Перейдите в `Мои плейлисты`, выберите найденный список.
4. Откройте `Редактор` для чистки/сортировки/экспорта.
5. Откройте `Плеер`, выберите канал и тип плеера (встроенный/VLC).
6. При torrent/ace потоке проверьте endpoint Engine в `Настройки`/`Диагностика`.

## Экспорт и пути файлов
- Экспорт M3U:
  - кнопка `Сохранить .m3u как...` (рекомендуется: вы сами выбираете путь);
  - или сохранение в app-specific storage.
- Экспорт логов:
  - кнопка `Экспорт логов как...` (через системный выбор пути);
  - или экспорт во внутренний каталог приложения.

## Разрешения приложения
- `INTERNET`
- `ACCESS_NETWORK_STATE`

## Безопасность и комплаенс
Приложение не содержит механизмов обхода DRM/взлома/скрытия следов.
Используйте только контент, на который у вас есть законные права.

## Лицензия и права использования
© 2026 Rinat Sarmuldin. All rights reserved.

Репозиторий распространяется по проприетарной лицензии: `LICENSE`.

Без письменного разрешения автора запрещены:
- использование в production и коммерческих проектах;
- копирование, изменение, распространение и создание производных работ.

Для получения прав на использование свяжитесь с автором: `ura07srr@gmail.com`.
